// Based off of buffer.js in the Node project(copyright Joyent, Inc. and other Node contributors.)
!function(){"use strict";function a(a){return h.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function b(a){return a=~~Math.ceil(+a),0>a?0:a}function c(a,b){if(!a)throw new Error(b)}function k(a){return 16>a?"0"+a.toString(16):a.toString(16)}function l(a,b,d,e){var f=0;return e||(c("boolean"==typeof d,"missing or invalid endian"),c(void 0!==b&&null!==b,"missing offset"),c(b+1<a.length,"Trying to read beyond buffer length")),d?(f=a[b]<<8,f|=a[b+1]):(f=a[b],f|=a[b+1]<<8),f}function m(a,b,d,e){var f=0;return e||(c("boolean"==typeof d,"missing or invalid endian"),c(void 0!==b&&null!==b,"missing offset"),c(b+3<a.length,"Trying to read beyond buffer length")),d?(f=a[b+1]<<16,f|=a[b+2]<<8,f|=a[b+3],f+=a[b]<<24>>>0):(f=a[b+2]<<16,f|=a[b+1]<<8,f|=a[b],f+=a[b+3]<<24>>>0),f}function n(a,b,d,e){var f,g;return e||(c("boolean"==typeof d,"missing or invalid endian"),c(void 0!==b&&null!==b,"missing offset"),c(b+1<a.length,"Trying to read beyond buffer length")),g=l(a,b,d,e),f=32768&g,f?-1*(65535-g+1):g}function o(a,b,d,e){var f,g;return e||(c("boolean"==typeof d,"missing or invalid endian"),c(void 0!==b&&null!==b,"missing offset"),c(b+3<a.length,"Trying to read beyond buffer length")),g=m(a,b,d,e),f=2147483648&g,f?-1*(4294967295-g+1):g}function p(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?0:e-1,m=c?1:-1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)}function q(a,b,d,e){return e||(c("boolean"==typeof d,"missing or invalid endian"),c(b+3<a.length,"Trying to read beyond buffer length")),p(a,b,d,23,4)}function r(a,b,d,e){return e||(c("boolean"==typeof d,"missing or invalid endian"),c(b+7<a.length,"Trying to read beyond buffer length")),p(a,b,d,52,8)}function s(a,b){c("number"==typeof a,"cannot write a non-number as a number"),c(a>=0,"specified a negative value for writing an unsigned value"),c(b>=a,"value is larger than maximum value for type"),c(Math.floor(a)===a,"value has a fractional component")}function t(a,b,d,e,f){f||(c(void 0!==b&&null!==b,"missing value"),c("boolean"==typeof e,"missing or invalid endian"),c(void 0!==d&&null!==d,"missing offset"),c(d+1<a.length,"trying to write beyond buffer length"),s(b,65535)),e?(a[d]=(65280&b)>>>8,a[d+1]=255&b):(a[d+1]=(65280&b)>>>8,a[d]=255&b)}function u(a,b,d,e,f){f||(c(void 0!==b&&null!==b,"missing value"),c("boolean"==typeof e,"missing or invalid endian"),c(void 0!==d&&null!==d,"missing offset"),c(d+3<a.length,"trying to write beyond buffer length"),s(b,4294967295)),e?(a[d]=255&b>>>24,a[d+1]=255&b>>>16,a[d+2]=255&b>>>8,a[d+3]=255&b):(a[d+3]=255&b>>>24,a[d+2]=255&b>>>16,a[d+1]=255&b>>>8,a[d]=255&b)}function v(a,b,d){c("number"==typeof a,"cannot write a non-number as a number"),c(b>=a,"value larger than maximum allowed value"),c(a>=d,"value smaller than minimum allowed value"),c(Math.floor(a)===a,"value has a fractional component")}function w(a,b,d){c("number"==typeof a,"cannot write a non-number as a number"),c(b>=a,"value larger than maximum allowed value"),c(a>=d,"value smaller than minimum allowed value")}function x(a,b,d,e,f){f||(c(void 0!==b&&null!==b,"missing value"),c("boolean"==typeof e,"missing or invalid endian"),c(void 0!==d&&null!==d,"missing offset"),c(d+1<a.length,"Trying to write beyond buffer length"),v(b,32767,-32768)),b>=0?t(a,b,d,e,f):t(a,65535+b+1,d,e,f)}function y(a,b,d,e,f){f||(c(void 0!==b&&null!==b,"missing value"),c("boolean"==typeof e,"missing or invalid endian"),c(void 0!==d&&null!==d,"missing offset"),c(d+3<a.length,"Trying to write beyond buffer length"),v(b,2147483647,-2147483648)),b>=0?u(a,b,d,e,f):u(a,4294967295+b+1,d,e,f)}function z(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?f-1:0,o=d?-1:1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}function A(a,b,d,e,f){f||(c(void 0!==b&&null!==b,"missing value"),c("boolean"==typeof e,"missing or invalid endian"),c(void 0!==d&&null!==d,"missing offset"),c(d+3<a.length,"Trying to write beyond buffer length"),w(b,3.4028234663852886e38,-3.4028234663852886e38)),z(a,b,d,e,23,4)}function B(a,b,d,e,f){f||(c(void 0!==b&&null!==b,"missing value"),c("boolean"==typeof e,"missing or invalid endian"),c(void 0!==d&&null!==d,"missing offset"),c(d+7<a.length,"Trying to write beyond buffer length"),w(b,1.7976931348623157e308,-1.7976931348623157e308)),z(a,b,d,e,52,8)}function D(){C=new d(h.poolSize),C.used=0}var d=window.ArrayBuffer||function(a){for(this.length=a;a--;)this[a]=0},e=window.Uint8Array||function(a,b,c){this.buffer=a,this.offset=b,this.length=c};"Uint8Array"in window&&e.prototype.set,window.Uint8Array||(e.prototype={get:function(a){return this.buffer[a+this.offset]},set:function(a,b){this.buffer[a+this.offset]=b}});var g=function(a,b,c){var d=new e(a,b,c);return d.parent=a,d.offset=b,d},h=function(c,e,f){var i,j,k,l;if("number"==typeof f)j=b(e),k=c;else{switch(i=typeof c){case"number":j=b(c);break;case"string":j=h.byteLength(c,e);break;case"object":j=b(c.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(j>h.poolSize?(k=new d(j),f=0):((!C||C.byteLength-C.used<j)&&D(),k=C,f=C.used,C.used+=j),a(c)){l=g(k,f,j);for(var m=j;m--;)l[m]=c[m]}else"string"==i&&(l=g(k,f,j),j=l.write(c,0,e))}return l||g(k,f,j)},i=h.prototype=e.prototype;i.toString=function(a,b,c){if(a=String(a||"utf8").toLowerCase(),b=+b||0,"undefined"==typeof c&&(c=this.length),+c==b)return"";switch(a){case"hex":return this.hexSlice(b,c);case"utf8":case"utf-8":return this.utf8Slice(b,c);case"ascii":return this.asciiSlice(b,c);case"base64":return this.base64Slice(b,c);default:throw new Error("Unknown encoding")}},i.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var e=d;d=b,b=c,c=e}b=+b||0;var f=this.length-b;switch(c?(c=+c,c>f&&(c=f)):c=f,d=String(d||"utf8").toLowerCase()){case"hex":return this.hexWrite(a,b,c);case"utf8":case"utf-8":return this.utf8Write(a,b,c);case"ascii":return this.asciiWrite(a,b,c);case"base64":return this.base64Write(a,b,c);default:throw new Error("Unknown encoding")}};var j=String.fromCharCode;i.utf8Write=function(a,b,c){for(var d=0,e=b,f=a.length,g=c-b;g>d&&f>d;d++){var h=a.charCodeAt(d);128>h?this[e++]=h:h>127&&2048>h?(this[e++]=192|h>>6,this[e++]=128|63&h):(this[e++]=224|h>>12,this[e++]=128|63&h>>6,this[e++]=128|63&h)}return this._charsWritten=e,f},i.utf8Slice=function(a,b){for(var d,g,h,c="",e=a,f=0;b>f&&(d=this[e]);e++)f++,128>d?c+=j(d):d>191&&224>d?(g=this[e+1],c+=j((31&d)<<6|63&g),e++):(g=this[e+1],h=this[e+2],c+=j((15&d)<<12|(63&g)<<6|63&h),e+=2);return c},i.asciiWrite=function(a,b,c){for(var d=0,e=a.length;c>d&&e>d;d++)this[d+b]=a.charCodeAt(d);return this._charsWritten=d,e},i.asciiSlice=function(a,b){for(var c="",d=a;b>d;d++)c+=j(this[d]);return c},i.hexWrite=function(a,b,c){function k(a){for(var b=0;b<d.length;b++)if(a==d[b])return b;throw new Error("Invalid hex string")}var d="0123456789abcdef";a=a.toLowerCase();for(var e=0,f=a.length,g=0;c>e/2&&f>e;e+=2,g++){var h=a[e],i=a[e+1],j=k(h)<<4|k(i);this[g+b]=j}},i.hexSlice=function(a,b){var c=this.length;(!a||0>a)&&(a=0),(!b||0>b||b>c)&&(b=c);for(var d="",e=a;b>e;e++)d+=k(this[e]);return d},i.copy=function(a,b,c,d){for(var e=0,f=d-c;f>e;e++)a[e+b]=this[e+c]},i.base64Slice=function(a,b){var c=this.length;(!a||0>a)&&(a=0),(!b||0>b||b>c)&&(b=c);for(var d="",e=a;b>e;e++)d+=window.btoa(this[e]);return d},i.base64Write=function(a,b,c){for(var d=0,e=a.length;c>d&&e>d;d++)this[d+b]=window.atob(a.charCodeAt(d));return this._charsWritten=d,e},i.slice=function(a,b){if(void 0===b&&(b=this.length),b>this.length)throw new Error("oob");if(a>b)throw new Error("oob");return g(this.buffer,+a,b-a)},i.toBlob=function(){var a=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return this.offset?a.append(this.toString("utf8")):a.append(this.buffer),a.getBlob()},i.readUInt8=function(a,b){var d=this;return b||(c(void 0!==a&&null!==a,"missing offset"),c(a<d.length,"Trying to read beyond buffer length")),d[a]},i.readUInt16LE=function(a,b){return l(this,a,!1,b)},i.readUInt16BE=function(a,b){return l(this,a,!0,b)},i.readUInt32LE=function(a,b){return m(this,a,!1,b)},i.readUInt32BE=function(a,b){return m(this,a,!0,b)},i.readInt8=function(a,b){var e,d=this;return b||(c(void 0!==a&&null!==a,"missing offset"),c(a<d.length,"Trying to read beyond buffer length")),e=128&d[a],e?-1*(255-d[a]+1):d[a]},i.readInt16LE=function(a,b){return n(this,a,!1,b)},i.readInt16BE=function(a,b){return n(this,a,!0,b)},i.readInt32LE=function(a,b){return o(this,a,!1,b)},i.readInt32BE=function(a,b){return o(this,a,!0,b)},i.readFloatLE=function(a,b){return q(this,a,!1,b)},i.readFloatBE=function(a,b){return q(this,a,!0,b)},i.readDoubleLE=function(a,b){return r(this,a,!1,b)},i.readDoubleBE=function(a,b){return r(this,a,!0,b)},i.writeUInt8=function(a,b,d){var e=this;d||(c(void 0!==a&&null!==a,"missing value"),c(void 0!==b&&null!==b,"missing offset"),c(b<e.length,"trying to write beyond buffer length"),s(a,255)),e[b]=a},i.writeUInt16LE=function(a,b,c){t(this,a,b,!1,c)},i.writeUInt16BE=function(a,b,c){t(this,a,b,!0,c)},i.writeUInt32LE=function(a,b,c){u(this,a,b,!1,c)},i.writeUInt32BE=function(a,b,c){u(this,a,b,!0,c)},i.writeInt8=function(a,b,d){var e=this;d||(c(void 0!==a&&null!==a,"missing value"),c(void 0!==b&&null!==b,"missing offset"),c(b<e.length,"Trying to write beyond buffer length"),v(a,127,-128)),a>=0?e.writeUInt8(a,b,d):e.writeUInt8(255+a+1,b,d)},i.writeInt16LE=function(a,b,c){x(this,a,b,!1,c)},i.writeInt16BE=function(a,b,c){x(this,a,b,!0,c)},i.writeInt32LE=function(a,b,c){y(this,a,b,!1,c)},i.writeInt32BE=function(a,b,c){y(this,a,b,!0,c)},i.writeFloatLE=function(a,b,c){A(this,a,b,!1,c)},i.writeFloatBE=function(a,b,c){A(this,a,b,!0,c)},i.writeDoubleLE=function(a,b,c){B(this,a,b,!1,c)},i.writeDoubleBE=function(a,b,c){B(this,a,b,!0,c)};var C;h.poolSize=8192,h.isBuffer=function(a){return a instanceof h||a instanceof d},h.byteLength=function(a,b){switch(b){case"ascii":return a.length;case"hex":return a.length/2}for(var f,c=0,d=0,e=a.length;e>c;c++)f=a.charCodeAt(c),128>f?d++:d+=f>127&&2048>f?2:3;return d},window.Buffer=h}();
